---
layout: default
author: muyalei
date: 2018-05-09
tags:
   - Django
---

***转载自[https://www.cnblogs.com/wongh/p/7919082.html](https://www.cnblogs.com/wongh/p/7919082.html)***

```
def search(request):  
    searchtype = request.POST.get("searchtype")  
    keyword = request.POST.get("keyword")  
    if searchtype == "all":  
        #多个字段模糊查询， 括号中的下划线是双下划线，双下划线前是字段名，双下划线后可以是icontains或contains,区别是是否大小写敏感，竖线是或的意思  
        sciencenews = models.Sciencenews.objects.filter(Q(title__icontains=keyword)\  
        |Q(content__icontains=keyword)|Q(author__icontains=keyword))  
    elif searchtype == "author":  
        #单个字段模糊查询  
        sciencenews = models.Sciencenews.objects.filter(author__icontains=keyword)  
    elif searchtype == "title":  
        sciencenews = models.Sciencenews.objects.filter(title__icontains=keyword)  
    elif searchtype == "content":  
        sciencenews = models.Sciencenews.objects.filter(content__icontains=keyword)  
    else:  
        #使用点连接的filter链表示and  
        sciencenews = models.Sciencenews.objects.filter(author__icontains=keyword).\  
            filter(title__icontains=keyword).filter(content__icontains=keyword)  
          
    return render(request,"show/index.html",{"param":sciencenews,"searchtype":searchtype,"keyword":keyword})  
``` 

多个字段模糊查询， 括号中的下划线是双下划线，双下划线前是字段名，双下划线后可以是icontains或contains,区别是是否大小写敏感，竖线是或的意思sciencenews = models.Sciencenews.objects.filter(Q(title__icontains=keyword)|Q(content__icontains=keyword)|Q(author__icontains=keyword))
