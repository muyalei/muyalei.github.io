---
layout: default
author: muyalei
date: 2019-01-29
title: js学习笔记
tags:
   - js学习笔记
---

***廖雪峰js教程学习笔记（教程地址[https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000](https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000)）***

### map/reduce的理解：

以map/reduce作用在示例array  arr = [1,2,3,4,5] 为例：

- map
  ```
  function foo1(x) {
      return x * x;
  }
  ```
  arr.map(foo1) 可理解为：map把foo1作用在arr的每一个元素上并将结果生成一个新的array。

- reduce
  ```
  function foo2(x,y) {
      return x + y;
  }
  ```
  arr.reduce(foo2) 可理解为：函数foo2从arr中顺序读取2个元素，并将计算后结果作为一个元素与arr的写一个元素进行计算。

- filter
  ```
  function foo3(x) {
      return x % 2 !== 0;
  }
  ```
  arr.filter(foo3) 可理解为：filter把传入的函数依次作用于arr的每个元素，根据返回值是true还是false决定保留还是丢弃该元素，生成一个新的array。

- sort
  ```
  #从小到大排列
  function foo(x,y) {
      if (x < y) {
          return -1;
      }
      if (x > y) {
          return 1;
      }
  }
  
  #从大到小排列
  funciton foo(x,y) {
      if (x < y) {
          return 1;
      }
      if (x > y) {
          return -1;
      }
  }
  ```
  arr.sort(foo) ，根据传入的自定义函数foo，对数组进行排序。
  ***注意：不传入自定义的比较函数时，sort()默认根据ascii码排序！***

- 理解闭包
  ```
  #示例函数
  function lazy_sum(arr) {
    var sum = function () {
        return arr.reduce(function (x, y) {
            return x + y;
        });
    }
    return sum;
  }
  ```
  理解：内部函数sum可以引用外部函数lazy_sum的参数和局部变量，当lazy_sum返回函数sum时，相关参数和变量都保存在返回的函数中，称之为'闭包'。

  #理解示例
  ```
  function count() {
    var arr = [];
    for (var i=1; i<=3; i++) {
        arr.push(function () {
            return i * i;
        });
    }
    return arr;
  }

  var results = count();
  var f1 = results[0];
  var f2 = results[1];
  var f3 = results[2];
  ```
  f1、f2、f3值都是16。原因：当执行results = count()，返回的结果是arr，即[f,f,f]，每个元素f都是还没有进行计算的count内部定义的函数，参数i也被保存在返回的函数f中。执行f()时，`function (){ return i * i };` 被执行，此时的i是经过3次循环后的值，为4，所以f1、f2、f3值都是16。




















