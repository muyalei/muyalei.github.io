系统服务atd、crond 负责例行性工作的排程。

at 命令设定的工作仅执行一次就从工作排程中取消 
/etc/at.allow  at命令白名单文件；/etc/at.deny at命令黑名单文件，该文件中的用户不允许使用at命令。两个文件都不存在，表示
只有root可以使用at命令。
at 命令安排的工作写入/var/spool/at/username目录下
/etc/init.d/atd restart   chkconfig --level 35 atd on ，启动atd服务并设置开机启动。atd服务默认关闭
at -m time  在指定时间点执行命令，并发送邮件给工作下发者。time格式：
HH：MM  如04：00
HH：MM YYYY-MM-DD 如04：00 2015-12-01
HH：MM + number minutes/hours/days/weeks 如 at now + 5 minutes 
HH：MM month day   
atq 查询已经安排的工作
atrm jobnumber 删除已经安排的工作

crontab 在工作排程中循环进行的工作。crond服务每一分钟到/var/spool/cron/username查询一次，执行符合条件的工作
/etc/cron.allow、/etc/cron.deny 与at类似
crontab命令设定的工作排程记录在/var/spool/cron/username下
-l 查看cron工作排程
-r 全部删除/etc/spool/cron/username下的工作排程，只删除某一项时直接-e进去删除即可。
-e 编辑工作排程
分钟 小时 日期 月 周  指令串 ，如 09 11 23 4 * mail kiki -s "its a test"
* 表示任何时刻都接受，"，"表示不同时间点，"-"表示时间段，"*/n"每隔多长时间接受的意思
-u username ，只有root权限可以使用该参数，替普通用户管理cron
crontab -e 命令是针对用户安排例行性工作，执行的是/usr/bin/crontab命令，工作排程写在/var/spool/cron/username下
/etc/crontab 该目录针对系统的例行性工作，工作排程格式有两种：
指令格式：分 小时 日期 月 周 用户 指令串  ，与crontab -e 相比，多了一个用户，以该用户权限执行该工作
目录格式：在/etc/crontab下写入行 */5 * * * * 用户 run-parts /root/runcron ，将可执行文件（程序）放置到/root/runcron目录
下，则每隔5分钟，crond服务去到/root/runcron目录下执行可执行文件。系统预设了/etc/cron.hourly、daily、weekly、monthly文件，
将程序放在这些目录下即可每小时/天/月/周 执行。  

 







linux上的工作排程：at，cron 

at 执行1次即从工作排程中删除。
atd服务守护该命令排程，atd服务默认关闭，/etc/init.d/atd restart 启动服务，chkconfig --level 35 atd on 设置开机启动；
使用at命令设置的工作排程写入/var/spool/at文件下，atd服务负责运行。

at指令使用限制：在/etc/at.deny文件中存在的账号不能使用at指令，一个账号一行。不存在at.deny则只用root可以使用at

at [-m] time  参数：-m 工作执行完通过e-mail通知使用者；
              time 指明工作执行时间，格式有 HH:MM,HH:MM YYYY-MM-DD,HH:MM[am|pm] [month] [date],HH:MM[am|pm] + number [minutes|hours|days|weeks]
如：at now + 5 minutes ，ctrl+d 结束工作输入。

使用at命令时，at会给予账号一个新的bash shell，用命令的绝对路径下达指令不会出错。at执行排程工作在背景执行。

atq 查询已经安排的工作排程；
atrm jobnumber 根据工作代号删除已经设定好的工作。



crontab 循环执行的例行性命令，由cron或者crond服务控制，这个服务默认是启动的。
/etc/cron.deny文件下的账号不能使用crontab命令。
用户使用crontab建立的例行性工作被记录到/var/spool/cron/下，不要用vi直接编辑该档案，可能会出错，无法执行cron。
cron执行日志被记录在/var/log/cron。

crontab 
-e 编辑crontab的工作内容，格式：分 时 日 月 周 指令串；
-l 查询/var/spool/cron/usnername 下用户设置的工作
-r 全部删除设定的例行性工作，只想删除某个时，直接-e去删除即可
-u username  root权限专用，帮其他用户建立/删除crontab工作内容。

crontab -e 是针对用户来设定例行性工作的命令，编辑的文件是/var/spool/cron/username，对于系统的例行性任务，直接vi编辑/etc/contab即可
cron服务每分钟自动读取/etc/crontab与/var/spool/cron/username内容，设定crontab后不生效，重启cron服务 /etc/init.d/crond restart

/etc/crontab 与crontab -e 区别：
/etc/crontab 加入使用者层级，可设定执行工作的用户；
/etc/crontab 下达指令的方式有两种，直接下达指令：分 时 日 月 周 执行者 命令或脚本，分 时 日 月 周 执行者 run-parts 多个脚本所在的目录； 

检查/var/log/cron，是否有非自己设定的cron被执行，以判定是否被植入以例行命令运行的木马；























































